# Development Environment Enhancements

The project utilizes a `Devcontainer` and `poetry` to tackle the "works on my machine" problem and provide a deterministic approach of setting up the dependencies. In addition, the development experience can be enhanced by including static code analysis. This aims to provide a quick guide on how to use these additions.

## Poetry

For a detailed explanation on how to use poetry, please refer to the [official documentation](https://python-poetry.org/docs/)

Poetry is a multi-platform tool to manage python dependencies and package distribution. compared to pip, it provides a more robust and feature-rich solution for managing python project. This project contains two artifacts which are used by poetry: `pyproject.toml`: and `poetry.lock`.

### pyproject.toml

This is the main configuration file. It specifies the project metadata (project name, author, license, ...), dependencies and build system settings. It supports semantic versioning and integrates with other build systems like pip.

### poetry.lock

To enable deterministic builds, this file contains the exact versions of all dependencies used in the project. It is automatically generated by poetry. The file can be created or updated by running the following command:

```sh
poetry lock
```

### Virtual environments

Analogue to `pip`, poetry can be used to install a virtual environment. However, it takes into account the exact versions defined in the `poetry.lock` file and uses a different dependency resolution mechanism.

This command installs a virtual environment using poetry:

```sh
poetry install
```

## Devcontainer

Visual studio code offers an extension that abstracts the development environment from the local OS by hosting it inside a Container. For details, please refer to the [Devcontainer Documentation](https://code.visualstudio.com/docs/devcontainers/containers).

The use of a devcontainer requires `Docker` to be installed on the host machine. For an installation guide, please refer to the installation instructions for your host operating system on [docker docs](https://docs.docker.com/desktop/).

To open the project inside a devcontainer, vs code and its [devcontainer extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers) must be installed.

Then, you can do the following to re-open the project inside the Devcontainer:

- Press `F1` or `CTRL` + `Shift` + `P` (or `CMD` + `Shift` + `P` on Mac) to bring up the **Command Palette**.
- Select the command `Dev Containers: Rebuild and Reopen in Container`.

This will take a few minutes, especially if the container has not been built before. A new vs code window will open, which now runs inside the devcontainer.

There are two files associated with this container. Both live inside the `.devcontainer` folder by convention.

### Dockerfile

The `Dockerfile` provides the instructions to create a container that can be used as the development container. A base image is defined and the dependencies of the project are installed inside the container.

### devcontainer.json

This file is the configuration file that tells vs code how to access or create a development container. It refers to the `Dockerfile` and provides a list of extensions that will be installed as part of the development environment. These include tools for static code analysis and compatibility with jupyter notebooks. Additionally, a few settings for these tools and the development environment are set here (customizations.vscode.settings), for example the desired `line-length`.